(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},28030,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),l=e.i(22016);function a(){let e=(0,r.useRouter)(),[a,o]=(0,s.useState)(!1),[i,n]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[b,h]=(0,s.useState)(""),[u,g]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),j=(0,s.useRef)(!1),v=(0,s.useRef)(!1);function w(){c(""),x(""),h(""),g(null),f(!1)}async function N(){if(!d.trim())return void alert("Please enter a job title");if(!m.trim())return void alert("Please enter a job description");if(!b.trim())return void alert("Please enter required skills");try{let e=u?`/api/jobs/${u}`:"/api/jobs",t=await fetch(e,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,description:m,requiredSkills:b})});if(!t.ok){let e=await t.json();alert(`Error: ${e.error||"Failed to save job"}`);return}try{sessionStorage.removeItem("admin_jobs")}catch(e){}w(),await k(),alert(`Job ${u?"updated":"created"} successfully!`)}catch(e){console.error("Error saving job:",e),alert(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}}async function y(e){if(confirm("Are you sure you want to delete this job posting?"))try{let t=await fetch(`/api/jobs/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();alert(`Error: ${e.error||"Failed to delete job"}`);return}try{sessionStorage.removeItem("admin_jobs")}catch(e){}await k(),alert("Job deleted successfully!")}catch(e){console.error("Error deleting job:",e),alert(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}}async function S(){try{await fetch("/api/admin/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout error:",e)}try{sessionStorage.removeItem("admin_authenticated"),sessionStorage.removeItem("admin_jobs")}catch(e){}e.replace("/admin/login")}async function k(){try{let e=sessionStorage.getItem("admin_jobs");if(e)return void n(JSON.parse(e))}catch(e){}if(!v.current){v.current=!0;try{let e=await fetch("/api/jobs",{cache:"no-store"}),t=await e.json();n(t);try{sessionStorage.setItem("admin_jobs",JSON.stringify(t))}catch(e){}}finally{v.current=!1}}}return((0,s.useEffect)(()=>{let t={v:!1};if(j.current){"true"===sessionStorage.getItem("admin_authenticated")&&o(!0);return}return(j.current=!0,"true"===sessionStorage.getItem("admin_authenticated"))?void o(!0):(fetch("/api/admin/me").then(e=>{if(!e.ok)throw Error();t.v||(sessionStorage.setItem("admin_authenticated","true"),o(!0))}).catch(()=>{t.v||(sessionStorage.removeItem("admin_authenticated"),e.replace("/admin/login"))}),()=>{t.v=!0})},[e]),(0,s.useEffect)(()=>{a&&k()},[a]),a)?(0,t.jsx)("main",{className:"min-h-screen bg-linear-to-b from-white via-slate-50 to-white py-12 px-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-12 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 mb-2",children:"Admin Dashboard"}),(0,t.jsx)("p",{className:"text-lg text-slate-600",children:"Manage job postings and career opportunities"})]}),(0,t.jsx)("button",{onClick:S,className:"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-2 rounded-lg transition",children:"Logout"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-yellow-400",children:[(0,t.jsx)("p",{className:"text-slate-600 text-sm font-semibold uppercase",children:"Total Jobs"}),(0,t.jsx)("p",{className:"text-4xl font-bold text-slate-900 mt-2",children:i.length})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-400",children:[(0,t.jsx)("p",{className:"text-slate-600 text-sm font-semibold uppercase",children:"Active"}),(0,t.jsx)("p",{className:"text-4xl font-bold text-slate-900 mt-2",children:i.filter(e=>e.title).length})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-400",children:[(0,t.jsx)("p",{className:"text-slate-600 text-sm font-semibold uppercase",children:"Status"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-2",children:"âœ“ Operational"})]})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("button",{onClick:()=>{f(!p),p&&w()},className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-8 py-3 rounded-lg transition transform hover:scale-105",children:p?"Cancel":"+ Add New Job"})}),p&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-yellow-100 p-8 mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:u?"Edit Job Posting":"Create New Job Posting"}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Job Title"}),(0,t.jsx)("input",{type:"text",placeholder:"e.g., Senior React Developer",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 bg-white text-slate-900 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Required Skills"}),(0,t.jsx)("input",{type:"text",placeholder:"e.g., React, Node.js, TypeScript",value:b,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 bg-white text-slate-900 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Description"}),(0,t.jsx)("textarea",{placeholder:"Job description, responsibilities, and requirements...",value:m,onChange:e=>x(e.target.value),rows:6,className:"w-full px-4 py-3 rounded-lg border border-slate-300 bg-white text-slate-900 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition resize-none"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{onClick:N,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition",children:u?"Update Job":"Create Job"}),(0,t.jsx)("button",{onClick:w,className:"flex-1 bg-slate-300 hover:bg-slate-400 text-slate-900 font-bold py-3 rounded-lg transition",children:"Clear"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:["Job Postings (",i.length,")"]}),0===i.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,t.jsx)("p",{className:"text-slate-600 text-lg",children:"No job postings yet."}),(0,t.jsx)("p",{className:"text-slate-500",children:"Create your first job posting to get started!"})]}):(0,t.jsx)("div",{className:"grid gap-6",children:i.map(s=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md border border-slate-200 hover:shadow-lg transition p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:s.title}),(0,t.jsxs)("p",{className:"text-sm text-yellow-600 font-semibold flex items-center gap-2",children:["ðŸ› ï¸ ",s.requiredSkills]})]}),(0,t.jsx)("p",{className:"text-slate-600 mb-6 leading-relaxed",children:s.description}),(0,t.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>{c(s.title),x(s.description),h(s.requiredSkills),g(s._id),f(!0),window.scrollTo(0,0)},className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded-lg transition",children:"âœï¸ Edit"}),(0,t.jsx)("button",{onClick:()=>y(s._id),className:"bg-red-600 hover:bg-red-700 text-white font-semibold px-5 py-2 rounded-lg transition",children:"ðŸ—‘ï¸ Delete"}),(0,t.jsx)("button",{onClick:()=>e.push(`/careers#${s._id}`),className:"bg-slate-600 hover:bg-slate-700 text-white font-semibold px-5 py-2 rounded-lg transition",children:"ðŸ‘ï¸ View"})]})]},s._id))})]}),(0,t.jsx)("div",{className:"mt-12 text-center",children:(0,t.jsx)(l.default,{href:"/",className:"inline-flex items-center text-sm font-semibold text-slate-700 hover:text-yellow-600 transition",children:"â† Back to Home"})})]})}):null}e.s(["default",()=>a])}]);